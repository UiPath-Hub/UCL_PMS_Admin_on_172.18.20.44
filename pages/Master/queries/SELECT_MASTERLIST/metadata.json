{
  "gitSyncId": "6811c5e566bdcc075542f090_650a66a0-7434-4966-8f46-3ff8a00b1eb1",
  "id": "Master_SELECT_MASTERLIST",
  "pluginId": "mssql-plugin",
  "pluginType": "DB",
  "unpublishedAction": {
    "actionConfiguration": {
      "body": "--SELECT TYPE_NAME,MAX(CAST(ACTIVE AS INT)) AS ACTIVE FROM dbo.PMS_MASTER_LIST GROUP BY TYPE_NAME\n\nWITH UniqueTypes AS (\n    SELECT TYPE_NAME, MAX(CAST(ACTIVE AS INT)) AS ACTIVE\n    FROM dbo.PMS_MASTER_LIST\n    GROUP BY TYPE_NAME\n)\nSELECT p.*\nFROM dbo.PMS_MASTER_LIST p\nRIGHT JOIN UniqueTypes as u\nON p.TYPE_NAME = u.TYPE_NAME\nWHERE\n    -- Case when ACTIVE = 1, select by MIN(SYSTEM_INDEX)\n    (\n        u.ACTIVE = 1\n        AND p.SYSTEM_INDEX = \n\t\t\t\t\t\t(SELECT MIN(SYSTEM_INDEX)\n            FROM dbo.PMS_MASTER_LIST\n            WHERE TYPE_NAME = p.TYPE_NAME AND PMS_MASTER_LIST.ACTIVE = 1)\n\t\t\tAND p.ACTIVE = 1\n    )\n    -- Case when ACTIVE = 0, select by MAX(VERSION) and MIN(SYSTEM_INDEX)\n    OR (\n\t\t\t\tp.ACTIVE = 0\n\t\t\t  AND\n        (u.ACTIVE = 0\n        AND p.VERSION = (\n            SELECT TOP(1) VERSION\n            FROM dbo.PMS_MASTER_LIST\n            WHERE TYPE_NAME = p.TYPE_NAME\n            AND PMS_MASTER_LIST.ACTIVE = 0 ORDER BY CREATE_DATE DESC)\n        AND p.SYSTEM_INDEX = (\n            SELECT MIN(SYSTEM_INDEX)\n            FROM dbo.PMS_MASTER_LIST\n            WHERE TYPE_NAME = p.TYPE_NAME\n            AND VERSION = p.VERSION\n            AND ACTIVE = 0)\n\t\t\t\t)\n\t\t);\n",
      "encodeParamsToggle": true,
      "paginationType": "NONE",
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ],
      "timeoutInMillisecond": 10000
    },
    "confirmBeforeExecute": false,
    "datasource": {
      "id": "UCL_PMS",
      "isAutoGenerated": false,
      "name": "UCL_PMS",
      "pluginId": "mssql-plugin"
    },
    "dynamicBindingPathList": [],
    "executeOnLoad": true,
    "name": "SELECT_MASTERLIST",
    "pageId": "Master",
    "userSetOnLoad": false
  }
}